<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="default :: header">
	<title>Track Pet services Controller Page</title>
</head>

<body onload="advice(), initMap()">

	<ul th:replace="default :: bar"></ul>

	<div id="divContent">
		<div class="needs-validation" id="divMainForm">
			<h2 style="text-align: center">Servicio de información de mascotas</h2>
			<br>

			<!-- Needed to identify the id to update to -->
			<p>El código de activación es:</p>
			<h4><span id="idPrepaidQrCode" th:text="${prepaidQR.id}" class="badge badge-lg badge-danger"></h4>

			<!-- Needed to update the name of the username -->
			<p>Asignado a usuario:</p>
			<h4><span id="user" th:text="${currentUser}" class="badge badge-lg badge-danger" style="color:white; text-align:center;"></span></h4>

			<!-- CouldExist or not, should be added manually by the admin -->
			<p>Punto de venta</p>
			<h4><span th:text="${prepaidQR.sellPoint}" class="badge badge-lg badge-danger" style="color:white; text-align:center;"></span></h4>
			<br>
			<br>
			<h5>Datos básicos</h5>
			<hr>
			<div class="row">
				<!-- Two colums -->
				<div class="col">
					<div class="form-group">
						<label for="raze">Raza</label>
						<!-- Start selector raze -->
						<select class="form-control" name="raze" id="raze">
							<option value="Otra" selected>Otra</option>
							<option value="Mestizo">Mestizo</option>
							<option value="Alaskan Malamute">Alaskan Malamute</option>
							<option value="American Staffordshire">American Staffordshire</option>
							<option value="Basset Hound">Basset Hound</option>
							<option value="Beagle">Beagle</option>
							<option value="Bichón Maltés">Bichón Maltés</option>
							<option value="Mobtail">Bobtail</option>
							<option value="Boxer">Boxer</option>
							<option value="Branco Alemán">Branco Alemán</option>
							<option value="Bulldog Francés">Bulldog Francés</option>
							<option value="Bulldog Inglés">Bulldog Inglés</option>
							<option value="Bullmastiff">Bullmastiff</option>
							<option value="Cane Corso">Cane Corso</option>
							<option value="Caniche">Caniche</option>
							<option value="Carlino">Carlino</option>
							<option value="Chihuahua">Chihuahua</option>
							<option value="Chow Chow">Chow Chow</option>
							<option value="Cocker Spaniel">Cocker Spaniel</option>
							<option value="Collie">Collie</option>
							<option value="Dálmata">Dálmata</option>
							<option value="Dobermann">Dobermann</option>
							<option value="Espagneul Breton">Espagneul Bretón</option>
							<option value="Galgo Español">Galgo Español</option>
							<option value="Golden Retriever">Golden Retriever</option>
							<option value="Husky Siberiano">Husky Siberiano</option>
							<option value="Labrador Retriever">Labrador Retriever</option>
							<option value="Leonberguer">Leonberguer</option>
							<option value="Mastín Español">Mastín Español</option>
							<option value="Pastor Alemán">Pastor Alemán</option>
							<option value="Pastor de Brie">Pastor de Brie</option>
							<option value="Perro de Agua Español">Perro de Agua
								Español</option>
							<option value="San Bernardo">San Bernardo</option>
							<option value="Scottish Terrier">Scottish Terrier</option>
							<option value="Schnauzer Miniatura">Schnauzer Miniatura</option>
							<option value="Setter Inglés">Setter Inglés</option>
							<option value="Teckel">Teckel</option>
							<option value="Terrier de Bedlington">Terrier de
								Bedlington</option>
							<option value="West Highland Terrier">West Highland
								Terrier</option>
							<option value="Yorkshire Terrier">Yorkshire Terrier</option>
						</select>
						<!-- End selector raze -->
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="petname">Nombre mascota</label>
						<input type="text" id="petName" placeholder="Nombre de la mascota" class="form-control" required>
					</div>
				</div>

			</div>

			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="age">Edad</label>
						<div id="resultAge"></div>

						<!-- Start select age -->
						<select class="form-control" name="age" id="age" onchange="age()">
							<option value="2018">2018</option>
							<option value="2017">2017</option>
							<option value="2016">2016</option>
							<option value="2015">2015</option>
							<option value="2014">2014</option>
							<option value="2013">2013</option>
							<option value="2012">2012</option>
							<option value="2011">2011</option>
							<option value="2010">2010</option>
							<option value="2009">2009</option>
							<option value="2008">2008</option>
							<option value="2007">2007</option>
							<option value="2006">2006</option>
							<option value="2005">2005</option>
							<option value="2004">2004</option>
							<option value="2003">2003</option>
							<option value="2002">2002</option>
							<option value="2001">2001</option>
							<option value="2000">2000</option>
							<option value="1999">1999</option>
							<option value="1998">1998</option>
							<option value="1997">1997</option>
							<option value="1996">1996</option>
							<option value="1995">1995</option>
						</select>
						<!-- End select age -->
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="sex">Sexo</label>
						<select id="sex" onchange="pregnant()" class="form-control">
							<option value="Macho">Macho</option>
							<option value="Hembra">Hembra</option>
						</select>
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="weight">Peso</label>
						<input type="number" id="weight" maxlength="2" min="1" placeholder="5" class="form-control"/>
					</div>
				</div>

			</div>
			<br>
			<br>
			<h5>Vacunación</h5>
			<hr>
			<div class="form-group">
				<div class="form-check">
					<input type="checkbox" style="width: 18px; height: 18px;" class="form-check-input" id="checkVaccines" onchange="checkVaccines()"
					 value=true>
					<label class="form-check-label">Vacunas</label>
				</div>
			</div>

			<br>
			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="dateAntiRabicVaccine">Antirábica</label>
						<input type="date" class="form-control" name="dateAntiRabicVaccine" id="dateAntiRabicVaccine" disabled>
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="datePolivalentVaccine">Polivalente</label>
						<input type="date" class="form-control" name="datePolivalentVaccine" id="datePolivalentVaccine" disabled>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="dateSextupleVaccine">Sextuple</label>
						<input type="date" class="form-control" name="dateSextupleVaccine" id="dateSextupleVaccine" disabled>
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="dateOctupleVaccine">Octuple</label>
						<input type="date" class="form-control" name="dateOctupleVaccine" id="dateOctupleVaccine" disabled>
					</div>
				</div>
			</div>
			<br>
			<br>
			<h5>Salud</h5>
			<hr>
			<div class="row">
				<div class="col-4">
					<div class="form-group">
						<label for="illness">Sufre efermedad</label>
						<!-- Start select age -->
						<select class="form-control" name="illness" id="illness">
							<option value="Ninguna">Ninguna</option>
							<option value="Gastritis">Gastritis</option>
							<option value="Otitis">Otitis</option>
							<option value="Moquillo">Moquillo</option>
							<option value="Sarna">Sarna</option>
							<option value="Parasitos">Parasitos</option>
							<option value="Artrosis">Artrosis</option>
							<option value="Parvovirus">Parvovirus</option>
							<option value="Leishmaniosis">Leishmaniosis</option>
							<option value="Coronavirus">Coronavirus</option>
							<option value="Leptospirosis">Leptospirosis</option>
							<option value="HepatitisVirica">HepatitisVirica</option>
							<option value="Tumor">Tumor</option>
							<option value="Mastitis">Mastitis</option>
							<option value="Piometra">Piometra</option>
							<option value="Alergias">Alergias</option>
							<option value="TorsionGastrica">TorsionGastrica</option>
							<option value="Otra">Otra</option>
						</select>
					</div>
				</div>

				<div class="col-4">
					<div class="form-group">
						<label for="medicated">Está medicado</label>
						<!-- Start select Medicated -->
						<select class="form-control" name="medicated" id="medicated">
							<option value=true>Sí</option>
							<option value=false>No</option>
						</select>
					</div>
				</div>

				<div class="col-4">
					<div class="form-group">
						<label for="lastVeterinaryVisit">Ult. revisión</label>
						<input type="date" class="form-control" name="lastVeterinaryVisit" id="lastVeterinaryVisit">
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col form-group">
					<label for="neuteredPet">Castrado</label>
					<select id="neuteredPet" class="form-control">
						<option value=false>No</option>
						<option value=true>Sí</option>
					</select>
				</div>

				<div class="col form-group">
					<label for="pregnant">Embarazo</label>
					<select id="pregnant" class="form-control" disabled>
						<option value=false>No</option>
						<option value=true>Sí</option>
					</select>
				</div>	
			</div>

			<div class="form-group">
				<label for="clinicHistory">Historia Clínica</label>
				<textarea name="clinicHistory" id="clinicHistory" placeholder="Historia Clínica" rows="9" class="form-control"></textarea>
			</div>
			<br>
			<br>
			<h5>Alimentación</h5>
			<hr>
			<br>
			<div id="feeding" class="row">
				<div class="col-4">
					<div class="form-group">
						<label for="foodBrand">Marca Comida Bal.:</label>
						<input type="text" id="foodBrand" class="form-control" placeholder="Royal cannin, Proplan, etc">
					</div>
				</div>
				<div class="col-4">
					<div class="form-group">
						<label for="quantityFood">Cantidad Grs.:</label>
						<input type="number" min="1" id="quantityFood" class="form-control" placeholder="1000 gramos (1 kg al día)">
					</div>
				</div>

				<div class="col-4">
					<div class="form-group">
						<label for="coockedFood">Comida humeda:</label>
						<select id="coockedFood" class="form-control">
							<option value="Nunca">Nunca</option>
							<option value="A veces">A veces</option>
							<option value="Todos los días">Todos los días</option>
						</select>
					</div>
				</div>
			</div>
			<br>
			<br>
			<h5>Estado respecto a Pet-QR</h5>
			<hr>
			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="status">Estado</label>
						<!-- Start select status -->
						<select class="form-control" name="status" id="status">
							<option value="true">Normal</option>
							<option value="false">Perdido</option>
						</select>
					</div>
				</div>
			</div>
			<br>
			<br>
			<H5>Datos del Tutor</H5>
			<hr>
			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="ownerName">Nombre</label> <input type="text" name="name" id="ownerName" placeholder="Nombre del cuidador"
						 class="form-control" required>
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="ownerLastname">Apellido</label> <input type="text" name="lastname" id="ownerLastname" placeholder="Apellido del cuidador"
						 class="form-control" required>
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="dni">D.N.I</label>
						<input type="number" name="dni" id="dni" placeholder="DNI del cuidador" class="form-control" required>
					</div>
				</div>
			</div>


			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="telephone1">Teléfono</label> <input type="number" name="telephone1" id="telephone1" placeholder="Teléfono primario"
						 class="form-control" />
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="telephone2">Teléfono</label> <input type="number" name="telephone2" id="telephone2" placeholder="Teléfono secundario"
						 class="form-control" />
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col">
					<div class="form-group">
						<label for="email">Email</label> <input type="text" name="email" id="email" placeholder="Email" class="form-control" />
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="facebook">Facebook</label> <input type="text" id="facebook" placeholder="Como aparecés en Facebook o la direcci�n exacta."
						 class="form-control" />
					</div>
				</div>

				<div class="col">
					<div class="form-group">
						<label for="instagram">Instagram</label> <input type="text" id="instagram" placeholder="Como aparecés en Instagram o la direcci�n exacta."
						 class="form-control" />
					</div>
				</div>
			</div>

			<div class="form-group">
				<label for="address">Dirección principal (Dirección altura, localidad, provincia)</label>
				<input type="text" name="address" id="address" placeholder="Av. Libertador 650, Buenos Aires, Argentina" class="form-control is-invalid" />
				<small class="form-text" style="color:pink; text-align:justify;">Es necesario utilizar el "motor" automático de
					direcciones para extraer
					la latitud y longitud requerida por la App, si no se utiliza, el mismo puede fallar y dar una dirección errónea en
					el mapa al momento de la lectura de código.</small>
			</div>

			<!-- Map Start -->
			<div>
				<div id="map" class="container-fluid"></div>
			</div>
			<!-- Map End -->

			<br>
			<div class="form-group">
				<button id="send" class="btn btn-danger" onclick="updateQr()">Almacenar datos y crear Código QR</button>
			</div>
			<br>
			<br>
			<br>
		</div>
	</div>

	<!--Template footer-->
	<div th:replace="default :: footer"></div>


	<script>
		function updateQr() {
			var idPrepaidQrCode = document.getElementById("idPrepaidQrCode").textContent;
			var petName = document.getElementById("petName").value;
			var ownerName = document.getElementById("ownerName").value;
			var ownerLastname = document.getElementById("ownerLastname").value;
			var raze = document.getElementById("raze").value;
			var foodBrand = document.getElementById("foodBrand").value;
			var quantityFood = document.getElementById("quantityFood").value;
			var neuteredPet = document.getElementById("neuteredPet").value;
			var user = document.getElementById("user").textContent;
			var age = document.getElementById("age").value;
			var lastVeterinaryVisit = document.getElementById("lastVeterinaryVisit").value;
			var dateAntiRabicVaccine = document.getElementById("dateAntiRabicVaccine").value;
			var datePolivalentVaccine = document.getElementById("datePolivalentVaccine").value;
			var dateSextupleVaccine = document.getElementById("dateSextupleVaccine").value;
			var dateOctupleVaccine = document.getElementById("dateOctupleVaccine").value;
			var status = document.getElementById("status").value;
			var clinicHistory = document.getElementById("clinicHistory").value;
			var illness = document.getElementById("illness").value;
			var medicated = document.getElementById("medicated").value;
			var coockedFood = document.getElementById("coockedFood").value;
			var sex = document.getElementById("sex").value;
			var pregnant = document.getElementById("pregnant").value;
			var weight = document.getElementById("weight").value;
			var dni = document.getElementById("dni").value;
			var address = document.getElementById("address").value;
			var telephone1 = document.getElementById("telephone1").value;
			var telephone2 = document.getElementById("telephone2").value;
			var facebook = document.getElementById("facebook").value;
			var instagram = document.getElementById("instagram").value;
			var email = document.getElementById("email").value;

			var xhr = new XMLHttpRequest();
			var url = "/update-qr";

			xhr.open("POST", url, true);
			xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xhr.send("idPrepaidQrCode=" + idPrepaidQrCode + "&ownerName=" + ownerName + "&ownerLastname=" + ownerLastname + "&raze=" + raze + "&foodBrand=" + foodBrand + "&user=" + user + "&age=" + age + " &lastVeterinaryVisit=" + lastVeterinaryVisit + "&dateAntiRabicVaccine=" + dateAntiRabicVaccine + "&datePolivalentVaccine=" + datePolivalentVaccine + "&dateSextupleVaccine=" + dateSextupleVaccine + "&dateOctupleVaccine=" + dateOctupleVaccine + "&clinicHistory=" + clinicHistory + "&illness=" + illness + "&medicated=" + medicated + "&quantityFood=" + quantityFood + "&neuteredPet=" + neuteredPet + "&coockedFood=" + coockedFood + "&status=" + status + "&pregnant=" + pregnant + "&weight=" + weight + "&petName=" + petName + "&sex=" + sex + "&dni=" + dni + "&telephone1=" + telephone1 + "&telephone2=" + telephone2 + "&email=" + email + "&address=" + address + "&facebook=" + facebook + "&instagram=" + instagram);
			console.log(idPrepaidQrCode);
			xhr.onreadystatechange = function () {
				if (xhr.readyState == 4 && xhr.status == 200) {
					alert(xhr.responseText);
				}
			}

		}
	</script>

	<!-- Start Google Maps Javascript -->
</body>



<script type="text/javascript" src="js/googleApis.js"></script>

<!-- Javascript maps libraries -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDFuQb3h_4AhG3Kmdf3NIz3aZfzsguDQOE&libraries=places&callback=initMap"
 async defer></script>
<!-- Javascript maps libraries -->

</html>